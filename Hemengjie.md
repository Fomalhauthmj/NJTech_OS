4.1 修改md命令

完成此任务只需要增加一个判断当前目录下是否存在同名文件的分支即可。

4.2 修改命令行预处理程序

完成此任务只需要增加处理"cd.."的逻辑，这里不考虑输出重定向功能。

4.3 新增fc命令，实现两个文件的比较

将两个文件的内容分别保存到buffer中，对buffer进行比较。

4.4 新增replace命令，实现文件取代

将源文件内容保存到buffer中，利用buffer_to_file()函数修改目标文件内容。

4.6 新增batch命令，实现批处理

此任务分为两种处理模式：

​	①从真实磁盘中读入文件处理

​	②从模拟磁盘中读入文件处理

对于情况①，使用ifstream输入文件流即可完成。对于情况②，采取的处理方式是将模拟磁盘文件内容保存到buffer中，对buffer进行分析。当处理到'\n'时，完成一条命令的输入即可。

4.7 修改close、type等命令，允许不带文件名参数

为了完成此任务，增加了一个CurFile的数据结构：

```c++
struct CurFile		//定义当前操作文件的数据结构
{
	char cpath[PATH_LEN];		//当前操作文件绝对路径字符串(全路径名)
};
```

增加了一个修改当前操作文件的函数：

```c++
void ChangeCurFile(char* path)
{
	strcpy(curFile.cpath, path);
}
```

当涉及命令不提供相应参数时，提示将对当前操作文件进行操作。同时在涉及命令成功操作后更新当前操作文件。

4.8 修改del、copy等命令，使其可以使用统配符 *（选做内容）

采用递归的设计思想处理此任务。当发现涉及命令参数出现统配符'*'时，首先定位当前目录，由于同目录文件FCB的连续性，可以使用循环来处理当前目录下的所有文件。当遇到非空目录项时，构造相应的命令参数，然后调用相应的命令即可完成此文件的处理。

4.13 修改程序，实现多磁盘文件系统（选做内容）

在处理此任务时，完成修改后测试发现无法读出模拟磁盘内容，未能发现实现错误之处，故放弃。

4.14 修改磁盘块容量（选做内容）

磁盘块大小由64字节修改为256字节，主要修改之处在于对每个盘块读取目录项的循环次数由4改为16，除此以外并无大的改动。

4.15 修改undel命令（选做内容）

采用3种修改方案中的第2种，配合4.14 修改磁盘块容量一起完成。原始命令只能恢复目录项没有被占用的被删除文件，同时要求被删除文件磁盘块也未被占用。增强功能修改后，在UnDel结构中保存被删除文件的所有信息，便于处理目录项被占用而磁盘块未被占用的恢复情况。同时修改undel命令的处理逻辑：对udtab表中的所有表项逐个进行处理，恢复时首先在对应目录中寻找被删除目录项进行恢复。若未找到被删除目录项则确定发生了该文件目录项被占用的情况，此时新建一个空白目录项进行恢复即可。